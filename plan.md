# **Загальний опис проєкту**
- **Мета:** Створити локальний веб-додаток для дослідження запитів користувача з можливістю вибору між поверхневим і глибоким пошуком (DeepResearch). Додаток має взаємодіяти з Gemini API для генерації відповідей і звітів, працювати у вигляді настільного додатку з темним мінімалістичним дизайном і підтримувати збереження та перегляд даних у базі даних.
- **Основні функції:**
  1. **Поверхневий пошук:** Коротка відповідь від Gemini та список релевантних веб-сторінок, які відкриваються в браузері при натисканні.
  2. **Глибокий пошук (DeepResearch):** Збір інформації з багатьох сайтів, збереження її в базі даних, генерація детального звіту у форматі Markdown за допомогою Gemini і можливість ставити додаткові запитання до Gemini з доступом до даних із бази даних.
  3. **Налаштування:** Розділ для введення API-ключа Gemini.
  4. **Дизайн:** Темний, мінімалістичний стиль, натхненний чатом із Grok.
  5. **Перегляд сайтів:** Список відвіданих сайтів після DeepResearch із іконками, назвами та посиланнями.
- **Технічні вимоги:**
  - Локальний запуск як настільний додаток (не в браузері).
  - Використання Python із такими бібліотеками: Flask (веб-сервер), Selenium (веб-скрапінг), BeautifulSoup (парсинг HTML), SQLAlchemy (база даних), PyQt5 (настільний інтерфейс).

# **План виконання**

#### **Етап 1: Підготовка середовища**
1. **Встановлення бібліотек:**
   - `Flask` — для веб-сервера.
   - `Selenium` — для автоматизації пошуку в інтернеті.
   - `BeautifulSoup` — для парсингу вмісту веб-сторінок.
   - `SQLAlchemy` — для роботи з базою даних (SQLite).
   - `PyQt5` — для створення настільного інтерфейсу з окремим вікном.
   - `requests` — для HTTP-запитів (наприклад, для отримання іконок).
   - `google-generativeai` — для інтеграції з Gemini API.

2. **Налаштування проєкту:**
   - Створити директорію проєкту та віртуальне середовище Python.
   - Встановити залежності через `pip install -r requirements.txt`.

3. **Налаштування бази даних:**
   - Використовувати SQLite для зберігання даних про веб-сторінки (URL, назва, іконка, текст).
   - Створити таблиці:
     - Для результатів пошуку (запит, тип пошуку, відповідь).
     - Для веб-сторінок (URL, назва, іконка, вміст).

---

#### **Етап 2: Розробка backend**
1. **Створення Flask-сервера:**
   - Налаштувати маршрути для:
     - Обробки запитів користувача.
     - Відображення результатів.
     - Збереження та отримання налаштувань.

2. **Логіка пошуку:**
   - **Поверхневий пошук:**
     - Користувач вводить запит, додаток відправляє його до Gemini API для отримання короткої відповіді.
     - За допомогою Selenium виконується пошук у пошуковій системі (наприклад, DuckDuckGo), витягуються заголовки та URL перших кількох сторінок.
     - Дані відображаються під відповіддю від Gemini як список посилань.
   - **Глибокий пошук (DeepResearch):**
     - Виконується пошук у інтернеті через Selenium, відвідуються релевантні сайти.
     - За допомогою BeautifulSoup витягується текст із кожної сторінки, дані (URL, назва, іконка, текст) зберігаються в базі даних.
     - Уся зібрана інформація передається до Gemini API для створення детального звіту у форматі Markdown.
     - Користувач може ставити додаткові запитання до Gemini, додаючи контекст із бази даних.

3. **Інтеграція з Gemini API:**
   - Створити функцію для відправки запитів до Gemini API з використанням API-ключа з налаштувань.
   - Для поверхневого пошуку: простий запит → коротка відповідь.
   - Для DeepResearch: складний запит із контекстом із бази даних → детальний звіт у Markdown.

4. **Збереження та обробка даних:**
   - Зберігати інформацію про кожну відвідану сторінку в базі даних (для DeepResearch).
   - Реалізувати функцію для витягання даних із бази даних під час додаткових запитань до Gemini.

---

#### **Етап 3: Розробка frontend**
1. **Створення настільного інтерфейсу з PyQt5:**
   - Розробити додаток із власним вікном (не в браузері) за допомогою PyQt5.
   - Реалізувати основні секції:
     - Панель введення запиту.
     - Панель результатів.
     - Розділ налаштувань.

2. **Інтерфейс введення запиту:**
   - Текстове поле для запиту.
   - Чекбокс або перемикач для увімкнення DeepResearch (за замовчуванням — поверхневий пошук).
   - Кнопка "Пошук".

3. **Відображення результатів:**
   - **Поверхневий пошук:**
     - Коротка відповідь від Gemini.
     - Список посилань (заголовок + URL), при натисканні на які відкривається браузер.
   - **Глибокий пошук (DeepResearch):**
     - Детальний звіт у форматі Markdown.
     - Список відвіданих сайтів із іконками (favicon), назвами та посиланнями.
     - Поле для введення додаткових запитань до Gemini.

4. **Розділ налаштувань:**
   - Поле для введення API-ключа Gemini.
   - Кнопка для збереження ключа (зберігається в конфігураційний файл або базу даних).

5. **Дизайн:**
   - Темний фон (наприклад, темно-сірий #333).
   - Світлий текст (наприклад, білий або світло-сірий).
   - Мінімалістичний стиль: прості кнопки, чіткі шрифти, відсутність зайвих елементів.

---

#### **Етап 4: Реалізація додаткових функцій**
1. **Перегляд відвіданих сайтів (DeepResearch):**
   - Після завершення глибокого пошуку відображати список сайтів із:
     - Іконкою (отримувати через `http://www.google.com/s2/favicons?domain=example.com`).
     - Назвою сторінки.
     - Посиланням (можливість відкрити в браузері).
   - Дані витягуються з бази даних.

2. **Додаткові запитання до Gemini:**
   - Додати текстове поле для введення додаткових запитань.
   - При відправці запитання передавати Gemini контекст із бази даних (збережену інформацію про сайти).

---

#### **Етап 5: Тестування та документація**
1. **Тестування:**
   - Перевірити обидва типи пошуку (поверхневий і DeepResearch) із різними запитами.
   - Переконатися, що:
     - Сторінки відкриваються в браузері при натисканні (поверхневий пошук).
     - Дані зберігаються в базі даних і коректно відображаються (DeepResearch).
     - Додаткові запитання до Gemini працюють із контекстом.
   - Тестувати інтерфейс на зручність і відповідність темному мінімалістичному стилю.

2. **Документація:**
   - Створити інструкцію для користувача:
     - Як встановити залежності (`pip install -r requirements.txt`).
     - Як запустити додаток (наприклад, `python main.py`).
     - Як ввести API-ключ у налаштуваннях.
     - Як використовувати поверхневий і глибокий пошук.
     - Як переглядати збережені дані та ставити додаткові запитання.